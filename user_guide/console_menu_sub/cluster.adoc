= [클러스터] 메뉴
:toc:
:toc-title:

*[클러스터]* 메뉴는 마스터 클러스터 내부의 서브 클러스터를 관리할 수 있는 메뉴이다.
[width="100%",options="header", cols="1,3"]
|====================
|탭|기능
|클러스터|생성된 "서브 클러스터"를 조회 
|클러스터 클레임|서브 클러스터 생성을 위한 요구 사항을 정의하는 "클러스터 클레임"의 관리 및 조회
|클러스터 등록|서브 클러스터 생성을 위해 클러스터의 kubeconfig 파일을 등록하는 "클러스터 등록"의 관리 및 조회
|클러스터 업데이트 클레임|서브 클러스터의 노드 개수를 변경을 위한 요구 사항을 정의하는 "클러스터 업데이트"의 관리 및 조회
|====================

본 장에서는 각 탭의 화면 구성과 기능에 대해서 설명한다.

== [클러스터] 탭

"멀티 클러스터" 콘솔 메뉴에서 *[클러스터]* 메뉴를 선택하면 *클러스터* 메인 화면으로 이동한다. +
*클러스터* 메인 화면의 *[클러스터]* 탭에서는 클러스터 클레임 또는 클러스터 등록을 통해 생성된 ``서브 클러스터``를 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-cluster-main]
image::../../images/figure_admin_cluster_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
서브 클러스터 목록을 조회할 네임스페이스를 선택한다.

<2> *검색 조건 (레이블, 이름)* +
서브 클러스터의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<3> *서브 클러스터 목록* +
네임스페이스에 생성된 서브 클러스터 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|서브 클러스터의 이름이다. 이때 이름을 클릭하면 해당 서브 클러스터의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|서브 클러스터가 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|프로바이더|클러스터 API 공급자의 종류이다.
|타입|서브 클러스터의 생성 방식이다.

* 생성 : 클러스터 클레임을 통해 생성
* 등록 : 클러스터 등록을 통해 생성
|상태|서브 클러스터의 현재 상태 정보이다.

* Processing : 클러스터 클레임 승인 또는 등록이 완료되어 클러스터가 추가 중인 상태
* Sync Needed : 애플리케이션의 Sync가 필요한 상태 (클릭 시 AroCD 콘솔 활성화)
* Ready : 애플리케이션 배포가 완료된 상태
* Deleting : 클러스터가 삭제 중인 상태
|버전|사용할 쿠버네티스의 버전 정보이다.
|마스터 노드|동작 중인 마스터 노드의 개수와 구성된 마스터 노드의 총 개수이다.
|워커 노드|동작 중인 워커 노드의 개수와 구성된 워커 노드의 총 개수이다.
|생성 시간|서브 클러스터가 생성된 시간이다.
|image:../../images/figure_action_icon.png[]|서브 클러스터의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 노드 수정 : 마스터 노드와 워커 노드를 확장 및 축소
* 버전 수정 : Kubernetes의 버전을 업그레이드 
* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 클러스터 수정 : 서브 클러스터의 구성 정보를 수정
* 클러스터 삭제 : 서브 클러스터를 삭제
|====================
+
NOTE: 클러스터 등록을 통해 생성된 서브 클러스터는 오토스케일링이 불가능하다.


== [클러스터 클레임] 탭

"멀티 클러스터" 콘솔 메뉴에서 *[클러스터]* 메뉴를 선택하면 *클러스터* 메인 화면으로 이동한다. +
*클러스터* 메인 화면의 *[클러스터 클레임]* 탭에서는 서브 클러스터 생성을 위한 요구 사항을 정의하는 ``클러스터 클레임``을 관리(생성, 수정, 삭제) 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-cluster-main]
image::../../images/figure_admin_cluster_claims_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
클러스터 클레임을 생성하거나 클러스터 클레임 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 클러스터 클레임을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *필터 (상태)* +
클러스터 클레임의 상태 정보를 선택해서 검색한다. 이때 다중선택도 가능하다.

<4> *검색 조건 (레이블, 이름)* +
클러스터 클레임의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<5> *클러스터 클레임 목록* +
네임스페이스에 생성된 클러스터 클레임의 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|클러스터 클레임의 이름이다. 이때 이름을 클릭하면 해당 클러스터 클레임의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|클러스터 클레임이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|클러스터|클러스터 클레임을 통해 실제 생성될 서브 클러스터의 이름이다.
|프로바이더|클러스터 API 공급자의 종류이다.
|상태|클러스터 클레임의 현재 승인 상태 정보이다.

* Awaiting : 클레임에 대한 승인을 기다리는 상태
* Approved : 클레임이 승인되어 클러스터가 생성 중인 상태
* Rejected : 클레임의 승인이 거절된 상태
* Cluster Deleted : 해당 클러스터 클레임을 통해 생성된 클러스터가 삭제된 상태
* Error : 클레임의 승인 과정에서 오류가 발생한 상태
|버전|사용할 쿠버네티스의 버전 정보이다.
|생성 시간|클러스터 클레임이 생성된 시간이다.
|image:../../images/figure_action_icon.png[]|클러스터 클레임의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 클러스터 클레임 수정 : 클러스터 클레임의 구성 정보를 수정
* 클러스터 클레임 삭제 : 클러스터 클레임을 삭제
* 승인 처리 : 클러스터 클레임의 승인 여부를 선택 (단, 'Approved'
및 'Cluster Deleted' 상태일 경우 비활성화)

** Approved : 승인
** Rejected : 승인 거절
|====================
+
NOTE: 클러스터 클레임의 상태가 'Approved' 및 'Cluster Deleted'인 경우 파라미터 값의 수정이 불가능하다.


== [클러스터 등록] 탭

"멀티 클러스터" 콘솔 메뉴에서 *[클러스터]* 메뉴를 선택하면 *클러스터* 메인 화면으로 이동한다. +
*클러스터* 메인 화면의 *[클러스터 등록]* 탭에서는 서브 클러스터 생성을 위해 클러스터의 kubeconfig 파일을 등록하는 ``클러스터 등록``을 관리(생성, 수정, 삭제) 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-cluster-main]
image::../../images/figure_admin_cluster_regist_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
클러스터 등록을 생성하거나 클러스터 등록 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 클러스터 등록을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *검색 조건 (레이블, 이름)* +
클러스터 등록의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<4> *클러스터 등록 목록* +
네임스페이스에 생성된 클러스터 등록의 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|클러스터 등록의 이름이다. 이때 이름을 클릭하면 해당 클러스터 등록의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|클러스터 등록이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|상태|클러스터 등록의 현재 상태 정보이다.

* Registered : kubeconfig가 유효한 상태
* Error : kubeconfig가 유효하지 않은 상태
* ClusterDeleted : 해당 클러스터 등록을 통해 생성된 클러스터가 삭제된 상태
|클러스터 이름|클러스터 등록을 통해 생성될 클러스터의 이름이다.
|생성 시간|클러스터 등록이 생성된 시간이다.
|image:../../images/figure_action_icon.png[]|클러스터 등록의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 클러스터 등록 수정 : 클러스터 등록의 구성 정보를 수정
* 클러스터 등록 삭제 : 클러스터 등록을 삭제
|====================
+
[NOTE]
====
클러스터 등록의 상태가 'Error'인 경우 해당 상태 값을 클릭하면 오류의 원인을 확인할 수 있다.

* InvalidKubeConfig : kubeconfig form 자체가 틀린 경우
* ClusterNotFound : form은 맞지만 endpoint가 틀렸거나 존재하지 않는 클러스터인 경우
* ClusterNameDuplicated : 해당 네임스페이스에 같은 이름의 클러스터가 이미 존재하는 경우
====

== [클러스터 업데이트 클레임] 탭

"멀티 클러스터" 콘솔 메뉴에서 *[클러스터]* 메뉴를 선택하면 *클러스터* 메인 화면으로 이동한다. +
*클러스터* 메인 화면의 *[클러스터 업데이트 클레임]* 탭에서는 서브 클러스터의 노드 개수를 변경하기 위한 요구 사항을 정의하는 ``클러스터 업데이트 클레임``을 관리(생성, 수정, 삭제) 및 조회할 수 있다.

//[caption="그림. "] //캡션 제목 변경
[#img-cluster-main]
image::../../images/figure_admin_cluster_update_main.png[]

각 영역에 대한 설명은 다음과 같다.

<1> *네임스페이스 선택* +
클러스터 업데이트 클레임을 생성하거나 클러스터 클레임 목록을 조회할 네임스페이스를 선택한다.

<2> *생성 버튼* +
새로운 클러스터 업데이트 클레임을 폼 에디터 또는 YAML 에디터를 사용해 생성한다.

<3> *필터 (상태)* +
클러스터 업데이트 클레임의 상태 정보를 선택해서 검색한다. 이때 다중선택도 가능하다.

<4> *검색 조건 (레이블, 이름)* +
클러스터 업데이트 클레임의 이름 및 레이블 정보를 입력해서 검색한다. +
우선 검색 조건으로 "이름" 또는 "레이블"을 선택한 후 입력란에 검색어를 입력한다.

<5> *클러스터 업데이트 클레임 목록* +
네임스페이스에 생성된 클러스터 업데이트 클레임의 목록을 확인할 수 있다. +
다음은 각 항목에 대한 설명이다.
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름|클러스터 업데이트 클레임의 이름이다. 이때 이름을 클릭하면 해당 클러스터 업데이트 클레임의 상세 정보를 확인할 수 있는 화면이 열린다.
|네임스페이스|클러스터 업데이트 클레임이 생성된 네임스페이스의 이름이다. 이때 이름을 클릭하면 해당 네임스페이스의 상세 정보를 확인할 수 있는 화면이 열린다.
|상태|클러스터 업데이트 클레임의 현재 승인 상태 정보이다.

* Awaiting : 클레임에 대한 승인을 기다리는 상태
* Approved : 클레임이 승인되어 클러스터가 생성 중인 상태
* Rejected : 클레임의 승인이 거절된 상태
* Error : 클레임의 승인 과정에서 오류가 발생한 상태
|클러스터|클러스터 업데이트 클레임을 통해 노드 개수를 변경할 서브 클러스터의 이름이다.
|현재 노드|서브 클러스터의 현재 노드 개수이다. (M: Master 노드, W: Worker 노드)
|업데이트 노드|서브 클러스터의 변경할 노드 개수이다. (M: Master 노드, W: Worker 노드)
|image:../../images/figure_action_icon.png[]|클러스터 업데이트 클레임의 관리를 위한 메뉴를 사용할 수 있다. +
이때 제공하는 메뉴는 다음과 같다.

* 레이블 수정 : 리소스의 식별을 위한 레이블을 추가, 삭제
* 주석 수정 : 리소스를 외부에서 참조하여 사용하기 위한 주석을 추가, 수정, 삭제
* 클러스터 업데이트 클레임 수정 : 클러스터 업데이트 클레임의 구성 정보를 수정
* 클러스터 업데이트 클레임 삭제 : 클러스터 업데이트 클레임을 삭제
* 승인 처리 : 클러스터 업데이트 클레임의 승인 여부를 선택 (단, 'Approved' 상태일 경우 비활성화)

** Approved : 승인
** Rejected : 승인 거절
|====================
+
NOTE: 클러스터 업데이트 클레임의 상태가 'Approved' 인 경우 파라미터 값의 수정이 불가능하다.
