= 서비스 바인딩 생성
:toc:
:toc-title:

본 장에서는 서비스 바인딩 리소스의 생성 방법에 대해서 설명한다.

== 폼 에디터

새로운 서비스 바인딩을 폼 에디터를 사용해서 생성할 수 있다.

. "개발자" 콘솔 메뉴에서 *[서비스 바인딩]* 메뉴를 선택한다.
. *서비스 바인딩* 메인 화면이 열리면 네임스페이스 선택 영역에서 새로운 서비스 바인딩을 생성할 특정 네임스페이스를 선택한다.
. *[서비스 바인딩 생성]* 버튼을 클릭한다.
. *서비스 바인딩 생성* 화면이 열리면 생성할 서비스 바인딩의 구성 정보를 설정한다. +
각 설정 항목에 대한 설명은 다음과 같다. (* : 필수 설정 항목)
+
[width="100%",options="header", cols="1,3a"]
|====================
|항목|설명  
|이름 *|서비스 바인딩의 이름을 입력한다.
|Labels|서비스 바인딩에 추가할 레이블 정보를 입력한다.
|바인딩 리소스 추가 방식|바인딩할 애플리케이션 및 백업 서비스의 추가 방식을 선택한다.

* 리소스 선택 : 목록을 통해 추가할 리소스의 정보를 선택한다.
* 직접 입력 : 사용자가 추가할 리소스의 정보를 직접 입력한다.

|애플리케이션 *|바인딩할 애플리케이션을 추가한다. +
바인딩 리소스 추가 방식에 따른 설정 항목은 다음과 같다.

* 리소스 선택 : 리소스, 리소스 이름
* 직접 입력 : 그룹, 버전, 리소스, 리소스 이름
|백업 서비스 *|바인딩할 백업 서비스를 추가한다. +
바인딩 리소스 추가 방식에 따른 설정 항목은 다음과 같다.

* 리소스 선택 : 네임스페이스, 리소스, 리소스 이름
* 직접 입력 : 네임스페이스, 그룹, 버전, 리소스, 리소스 이름

이때 **[+ 백업 서비스 추가]**를 클릭하면 설정 항목이 한 세트씩 추가되고, **[- 백업 서비스 제거]**를 클릭하면 설정 항목을 삭제할 수 있다.  
|바인딩 데이터|서비스 바인딩에 추가할 바인딩 데이터 정보(키/값)를 입력한다.

이때 **[+ 바인딩 데이터 추가]**를 클릭하면 설정 항목이 한 세트씩 추가되고, **[- 바인딩 데이터 제거]**를 클릭하면 설정 항목을 삭제할 수 있다.  
|데이터 저장 방식|애플리케이션 내 바인딩 데이터의 저장 방식을 선택한다. 

* 환경 변수
* 파일
|바인딩 데이터 감지|백업 서비스 내 리소스의 바인딩 데이터 자동 감지 여부를 선택한다.
|네이밍 전략|애플리케이션에 특정 형식의 바인딩 이름이 필요한 경우 바인딩 이름의 형식을 정의한다. 
|====================

. 설정이 완료되면 *[생성]* 버튼을 클릭해서 설정 내용을 저장한다.

== YAML 에디터

새로운 서비스 바인딩을 YAML 에디터를 사용해서 생성할 수 있다.

. HyperCloud 콘솔 화면 상단의 작업 표시줄 영역에서 image:../images/figure_import_yaml_icon.png[] 아이콘을 클릭한다.
. *Import YAML* 화면이 열리면 빈 YAML 에디터에 생성할 태스크의 구성 정보를 작성한다.
+
.기본 작성 예
[source,yaml]
----
apiVersion: binding.operators.coreos.com/v1alpha1
kind: ServiceBinding
metadata:
  name: example <1>
  namespace: default <2>
spec:
  application: <3>
    group: apps
    kind: Deployment
    name: deployment
    version: v1
  bindAsFiles: true <4>
  detectBindingResources: true <5> 
  mappings: <6>
  - name: key
    value: value
  namingStrategy: '{{ .name | upper }}' <7> 
  services: <8>
  - group: kafka.strimzi.io
    kind: Kafka
    name: kafka
    namespace: service-binding-operator
    version: v1beta2
----
+
<1> 서비스 바인딩의 이름
<2> 서비스 바인딩이 생성될 네이스페이스의 이름
<3> 애플리케이션(바인딩 데이터를 제공받는 대상)의 상세 정보
<4> 바인딩 데이터의 저장 방식 결정(true 설정 시 파일 / false 설정 시 환경 변수)
<5> 백업 서비스(바인딩 데이터를 제공하는 대상)의 바인딩 데이터를 자동으로 감지할지 여부 결정
<6> 바인딩된 리소스의 속성을 특정 환경 변수 또는 설정으로 매핑 시 사용
<7> 바인딩된 데이터의 이름 설정
<8> 백업 서비스(바인딩 데이터를 제공하는 대상)의 상세 정보

. 작성이 완료되면 *[생성]* 버튼을 클릭해서 작성 내용을 저장한다.
