= 노드 점검
:toc:
:toc-title:

== 노드 상태 확인

각 노드들이 정상적으로 "Ready" 상태를 유지하고 있는지 확인한다.

image::../../images/figure_admin_node_state.png[]
<1> "마스터 클러스터" 콘솔 선택
<2> *[호스트] > [노드]* 메뉴 클릭
<3> "상태" 확인

NOTE: CLI 환경에서는 `kubectl get nodes` 명령을 사용하여 노드의 상태를 조회할 수 있다.

== 노드 자원 확인

노드가 사용하고 있는 자원에 대한 점검으로 각 노드가 가지고 있는 디스크의 사용량을 80% 미만으로 유지해야 한다. +
노드의 디스크 사용량이 80% 이상이 될 경우 k8s는 자원 확보를 위해 파드를 삭제하게 된다. 이때 파드의 상태는 "evicted" 상태가 되며 지워지지 않고 계속 남아있게 된다. 또한 k8s는 "evictd" 상태가 된 서비스를 다시 기동시키기 위해 파드를 생성하고 다시 자원을 확보하기 위해 삭제를 한다. 이러한 동작을 반복하며 무수한 파드가 생성되고, 이로 인해 다른 문제가 발생할 수 있다. +
따라서 노드의 자원 사용량을 매일 점검해야 하며, 사용량이 80% 초과 시 빠르게 디스크의 사용량을 낮춰야 한다.

다음은 노드의 자원 사용량을 확인하는 방법이다.

. *확인할 노드 선택*
+
image::../../images/figure_admin_node_resource_used.png[]
<1> "마스터 클러스터" 콘솔 선택
<2> *[호스트] > [노드]* 메뉴 클릭
<3> 확인할 노드 이름 클릭

. *노드의 자원 사용량 확인*
+
노드의 상세 정보 화면이 열리면 해당 노드에 생성된 파드의 개수, 현재 사용 중인 자원량, 디스크 사용률 등 확인이 가능하다.
+
image::../../images/figure_admin_node_resource_used_02.png[]


NOTE: CLI 환경에서는 `kubectl describe node [노드 이름]` 명령을 사용하여 현재 노드가 사용하고 있는 CPU와 메모리의 사용량(실제로 사용 중인 수치가 아닌 네임스페이스, 파드 등에 할당되어 있는 사용치)을 확인할 수 있고, 해당 노드에 생성되어 있는 네임스페이스와 각 네임스페이스에서 사용 중인 자원양을 확인할 수 있다.
